<div class="container-fluid content-wrapper">
  <h1 class="page-title">Результаты сопоставления выбранных рейтингов</h1>

  <div class="row">
    <div class="col-12">
      <div>
        <form [formGroup]="filtersForm" class="filters-form">
          <div class="row">
            <div class="col-sm-5">
              <div class="form-group categories">
                <label class="col-form-label">Страны</label>
                <mat-form-field appearance="fill">
                  <mat-label>Select an option</mat-label>
                  <mat-select [(value)]="selectedCountryFilter" (selectionChange)="countryChange($event.target.value)">
                    <mat-option>Любая</mat-option>
                    <mat-option value="{{item}}" *ngFor="let item of countriesList"> {{item}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group">
                <label class="col-form-label">Поиск</label>
                <input class="form-control" type="text" (keyup)="search($event.target.value)" formControlName="search"
                  placeholder="Search by any field...">
              </div>
            </div>
            <div class="col-sm-3">
              <div class="form-group">
                <label class="col-form-label">Входит не менее чем в три рейтинга</label>
                <div class="input-group">
                  <mat-checkbox class="example-margin" [checked]="moreThen3" (change)="filterby3($event.checked)">
                    {{moreThen3}}
                    Входит
                  </mat-checkbox>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="recent-orders row">
        <div class="col table-wrapper table-responsive">
          <table mat-table matSort [dataSource]="dataSource"
            class="table table-borderless table-sm recent-orders-table">
            <ng-container matColumnDef="country">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Страна </th>
              <td mat-cell *matCellDef="let element">{{element.country}}</td>
            </ng-container>
            <ng-container matColumnDef="orgName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Организация </th>
              <td mat-cell *matCellDef="let element"><a href="http://{{element.url}}"
                  target="_blank">{{element.orgName}}</a></td>
            </ng-container>
            <ng-container matColumnDef="ranks">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Позиции </th>
              <td mat-cell *matCellDef="let element">
                <div *ngIf="element.ranks?.mosiur">Moscow: {{element.ranks?.mosiur}}<br></div>
                <div *ngIf="element.ranks?.QS">QS: {{element.ranks?.QS}}<br></div>
                <div *ngIf="element.ranks?.usnews">USNews: {{element.ranks?.usnews}}<br></div>
                <div *ngIf="element.ranks?.timeshighereducation">Times:
                  {{element.ranks?.timeshighereducation}}<br></div>
                <div *ngIf="element.ranks?.shanghaIRking">ARWU: {{element.ranks?.shanghaIRking}}<br></div>
              </td>
            </ng-container>
            <ng-container matColumnDef="rcount">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Количество рейтингов </th>
              <td mat-cell *matCellDef="let element"> {{element.rcount}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
          <mat-paginator class="table-paginator" [pageSizeOptions]="[5, 10, 25]" [pageSize]="5"></mat-paginator>
        </div>
      </div>
    </div>
  </div>
</div>